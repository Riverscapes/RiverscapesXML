<Protocol machine_code="ANABRANCH_ASBUILT" version="1.0" status="experimental" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://xml.riverscapes.net/QRiS/protocol.xsd">
    <Label>Anabranch As-Built Protocol</Label>
    <Description>As-Built Layers for Anabranch</Description>
    <URL>https://lowtechpbr.restoration.usu.edu/</URL>
    <Citation> Wheaton J.M., Bennett S.N., Bouwes, N., Maestas J.D. and Shahverdian S.M. (Editors). 2019. Low-Tech Process-Based Restoration of Riverscapes: Design Manual. Version 1.0. Utah State University Restoration Consortium. Logan, UT. 286 pp. DOI: 10.13140/RG.2.2.19590.63049/2. </Citation>
    <Author>Zach Burgert</Author>
    <CreationDate>2025-07-22</CreationDate>
    <UpdatedDate>2025-07-22</UpdatedDate>
    <Layers>
        <Layer id="structure_points" version="1.0" geom_type="Point">
            <Label>Structure Points</Label>
            <Symbology>structure_points.qml</Symbology>
            <Description>Structure Points Layer</Description>
            <Hierarchy>
                <HierarchyItem>Structures</HierarchyItem>
            </Hierarchy>
            <Fields>
                <ListField id="structure_type" version="1.0">
                    <Label>Structure Type</Label>
                    <Values>
                        <Value>ALS</Value>
                        <Value>ALS - Bank Attached</Value>                        
                        <Value>ALS - Channel Spanning</Value>
                        <Value>ALS - Rhino</Value>
                        <Value>BDA</Value>
                        <Value>BDA Postless</Value>
                        <Value>Bag Plugs</Value>                     
                        <Value>Full Tree</Value>                        
                        <Value>Headcut Treatment</Value>                        
                        <Value>One Rock Dam</Value>
                        <Value>PALS</Value>
                        <Value>PALS - Bank Attached</Value>                        
                        <Value>PALS - Channel Spanning</Value>                       
                        <Value>PALS - Mid Channel</Value>                        
                        <Value>Post and Brush Plug</Value>
                        <Value>Postline Wicker Weave</Value>
                        <Value>Primary BDA</Value>
                        <Value>Rhino</Value>
                        <Value>Secondary BDA</Value>
                        <Value>Sedge Plugs</Value>
                        <Value>Spreaders</Value>                        
                        <Value>Tight PALS (BDA without sod)</Value>                        
                        <Value>Tree Plug</Value>
                        <Value>Vanes</Value>
                        <Value>Wicker Weirs</Value>
                        <Value>Wood Jam</Value>
                        <Value>Zuni Bowl</Value>
                    </Values>
                </ListField>
                <IntegerField id="complex_number" version="1.0">
                    <Label>Complex Number</Label>
                </IntegerField>
                <IntegerField id="structure_number" version="1.0">
                    <Label>Structure Number</Label>
                </IntegerField>
                <FloatField id="length" version="1.0">
                    <Label>Structure Length (m)</Label>
                </FloatField>
                <FloatField id="width" version="1.0">
                    <Label>Structure Width (m)</Label>
                </FloatField>
                <FloatField id="height" version="1.0">
                    <Label>Structure Height (m)</Label>
                </FloatField>  
                <IntegerField id="number_of_posts" version="1.0">
                    <Label>Number of Posts</Label>
                </IntegerField>
                <IntegerField id="number_of_large_wood_pieces" version="1.0">
                    <Label>Number of Large Wood Pieces</Label>
                </IntegerField>      
                <TextField id="notes" version="1.0">
                    <Label>Notes</Label>                    
                </TextField>
            </Fields>
        </Layer>
        <Layer id="structure_lines" version="1.0" geom_type="Linestring">
            <Label>Structure Lines</Label>
            <Symbology>structure_lines.qml</Symbology>
            <Description>Structure Lines Layer</Description>
            <Hierarchy>
                <HierarchyItem>Structures</HierarchyItem>
            </Hierarchy>
            <Fields>
                <ListField id="structure_type" version="1.0">
                    <Label>Structure Type</Label>
                    <Values>
                        <Value>ALS</Value>
                        <Value>ALS - Bank Attached</Value>                        
                        <Value>ALS - Channel Spanning</Value>
                        <Value>ALS - Rhino</Value>
                        <Value>BDA</Value>
                        <Value>BDA Postless</Value>
                        <Value>Bag Plugs</Value>                     
                        <Value>Full Tree</Value>                        
                        <Value>Headcut Treatment</Value>                        
                        <Value>One Rock Dam</Value>
                        <Value>PALS</Value>
                        <Value>PALS - Bank Attached</Value>                        
                        <Value>PALS - Channel Spanning</Value>                       
                        <Value>PALS - Mid Channel</Value>                        
                        <Value>Post and Brush Plug</Value>
                        <Value>Postline Wicker Weave</Value>
                        <Value>Primary BDA</Value>
                        <Value>Rhino</Value>
                        <Value>Secondary BDA</Value>
                        <Value>Sedge Plugs</Value>
                        <Value>Spreaders</Value>                        
                        <Value>Tight PALS (BDA without sod)</Value>                        
                        <Value>Tree Plug</Value>
                        <Value>Vanes</Value>
                        <Value>Wicker Weirs</Value>
                        <Value>Wood Jam</Value>
                        <Value>Zuni Bowl</Value>
                    </Values>
                </ListField>
                <IntegerField id="complex_number" version="1.0">
                    <Label>Complex Number</Label>
                </IntegerField>
                <IntegerField id="structure_number" version="1.0">
                    <Label>Structure Number</Label>
                </IntegerField>
                <FloatField id="length" version="1.0">
                    <Label>Structure Length (m)</Label>
                </FloatField>
                <FloatField id="width" version="1.0">
                    <Label>Structure Width (m)</Label>
                </FloatField>
                <FloatField id="height" version="1.0">
                    <Label>Structure Height (m)</Label>
                </FloatField>  
                <IntegerField id="number_of_posts" version="1.0">
                    <Label>Number of Posts</Label>
                </IntegerField>
                <IntegerField id="number_of_large_wood_pieces" version="1.0">
                    <Label>Number of Large Wood Pieces</Label>
                </IntegerField>      
                <TextField id="notes" version="1.0">
                    <Label>Notes</Label>                    
                </TextField>
            </Fields>
        </Layer>
        <Layer id="observation_points_asbuilt" version="1.0" geom_type="Point">
            <Label>Observations</Label>
            <Symbology>observation_points_asbuilt.qml</Symbology>
            <Description>Observations Points Layer</Description>
            <Fields>
                <AttachmentField id="photo_path" version="1.0">
                    <Label>Photo Path</Label>
                </AttachmentField>
                <TextField id="notes" version="1.0">
                    <Label>Notes</Label>
                </TextField>
            </Fields>
        </Layer>
    </Layers>
    <Metrics>
        <Metric id="structure_count" version="1.0" calculation_machine_code="count">
            <Label>Structure Count</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The count of structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <DCELayer layer_id_ref="structure_points">                 
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                </DCELayer>
            </Parameters>            
        </Metric>
        <Metric id="structure_density" version="1.0" calculation_machine_code="count">
            <Label>Structure Density</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The density of structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <InputLayer input_ref="centerline" usage="normalization"/>
                <DCELayer layer_id_ref="structure_points">                 
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                </DCELayer>
            </Parameters>            
        </Metric>
        <Metric id="als_count" version="1.0" calculation_machine_code="count">
            <Label>ALS Count</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The count of ALS structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <DCELayer layer_id_ref="structure_points"> 
                    <AttributeFilter field_id_ref="structure_type">
                        <Value>ALS</Value>
                        <Value>ALS - Bank Attached</Value>                       
                        <Value>ALS - Channel Spanning</Value>
                        <Value>ALS - Rhino</Value>                   
                        <Value>Full Tree</Value>                       
                        <Value>Tree Plug</Value>                        
                        <Value>Wood Jam</Value>                        
                    </AttributeFilter>                
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                    <AttributeFilter field_id_ref="structure_type">
                        <Value>ALS</Value>
                        <Value>ALS - Bank Attached</Value>                        
                        <Value>ALS - Channel Spanning</Value>
                        <Value>ALS - Rhino</Value>                  
                        <Value>Full Tree</Value>                      
                        <Value>Tree Plug</Value>                        
                        <Value>Wood Jam</Value>                        
                    </AttributeFilter> 
                </DCELayer>
            </Parameters>            
        </Metric>        
        <Metric id="bda_count" version="1.0" calculation_machine_code="count">
            <Label>BDA Count</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The count of BDA structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <DCELayer layer_id_ref="structure_points">
                    <AttributeFilter field_id_ref="structure_type">
                        <Value>BDA</Value>
                        <Value>BDA Postless</Value>
                        <Value>Postline Wicker Weave</Value>
                        <Value>Primary BDA</Value>
                        <Value>Secondary BDA</Value>
                        <Value>Tight PALS (BDA without sod)</Value>                        
                    </AttributeFilter>                 
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                </DCELayer>
            </Parameters>            
        </Metric>
        <Metric id="other_count" version="1.0" calculation_machine_code="count">
            <Label>Other Count</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The count of Other structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <DCELayer layer_id_ref="structure_points"> 
                    <AttributeFilter field_id_ref="structure_type">
                        <Value>Bag Plugs</Value>                         
                        <Value>Headcut Treatment</Value>                        
                        <Value>One Rock Dam</Value>                        
                        <Value>Sedge Plugs</Value>
                        <Value>Spreaders</Value>                         
                        <Value>Vanes</Value>
                        <Value>Zuni Bowl</Value> 
                    </AttributeFilter>                
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                    <AttributeFilter field_id_ref="structure_type">
                        <Value>Bag Plugs</Value>                         
                        <Value>Headcut Treatment</Value>                        
                        <Value>One Rock Dam</Value>                        
                        <Value>Sedge Plugs</Value>
                        <Value>Spreaders</Value>                         
                        <Value>Vanes</Value>
                        <Value>Zuni Bowl</Value> 
                    </AttributeFilter>   
                </DCELayer>
            </Parameters>            
        </Metric>
        <Metric id="pals_count" version="1.0" calculation_machine_code="count">
            <Label>PALS Count</Label>
            <DefaultLevel>Metric</DefaultLevel>
            <Description>The count of PALS structures within sample frames.</Description>            
            <MinimumValue>0</MinimumValue>            
            <Precision>1</Precision>
            <Parameters>
                <DCELayer layer_id_ref="structure_points"> 
                    <AttributeFilter field_id_ref="structure_type">                        
                        <Value>PALS</Value>
                        <Value>PALS - Bank Attached</Value>                        
                        <Value>PALS - Channel Spanning</Value>                                                
                        <Value>PALS - Mid Channel</Value>                                                
                        <Value>Post and Brush Plug</Value>
                        <Value>Rhino</Value>                                                
                        <Value>Wicker Weirs</Value>
                    </AttributeFilter>                
                </DCELayer>
                <DCELayer layer_id_ref="structure_lines">
                    <AttributeFilter field_id_ref="structure_type">                        
                        <Value>PALS</Value>
                        <Value>PALS - Bank Attached</Value>                        
                        <Value>PALS - Channel Spanning</Value>                        
                        <Value>PALS - Mid Channel</Value>                                               
                        <Value>Post and Brush Plug</Value>
                        <Value>Rhino</Value>                                                
                        <Value>Wicker Weirs</Value>
                    </AttributeFilter>
                </DCELayer>
            </Parameters>            
        </Metric>
    </Metrics>
</Protocol>